The CertiCoq project

Installation instructions
=========================

Installing dependencies:
------------------------

  To install the compiler, you need Coq.8.5 along with the Template
and ExtLib packages of G. Malecha.  One way to get it is using opam:

  To add the official Coq repositories, you need:

# opam repo add coq-released https://coq.inria.fr/opam/released
# opam repo add coq-core-dev https://coq.inria.fr/opam/core-dev
# opam repo add coq-extra-dev https://coq.inria.fr/opam/extra-dev


  Then to install coq:

# opam install coq coq-template-coq coq-ext-lib


Alternatively, you can install Coq from source or download a binary from:

https://coq.inria.fr/coq-85

and install the packages from source:

https://github.com/coq-ext-lib/coq-ext-lib
https://github.com/gmalecha/template-coq/commit/2540cb532b1c4e773dff0381fe77f03cc83b77fd (branch : coq-8.5)





Building the compiler:
----------------------
  at certicoq/, run

# make -j4 -k

  This will build the compiler and its proofs.

  TODO: Extracted version ?

Troubleshooting:
----------------------

If the above fails, try the following

1) "make clean" at certicoq/ and then try to build again

2) Ensure that your working copy is EXACTLY the same as the contents of SVN repo. Unversioned files and directories should also be removed because they can 
interfere with how Coq resolves imports and how Makefile tracks dependences (via coqdep).

If you are using a git client to access the SVN repo, "git reset HEAD --hard; git clean -xf" ensures that the working copy exactly matches the state of the repository.

If you use the SVN client, there should be something similar:
http://stackoverflow.com/questions/239340/automatically-remove-subversion-unversioned-files
http://stackoverflow.com/questions/6204572/is-there-a-subversion-command-to-reset-the-working-copy

3) Is your file system case-insensitive? Please consider using a linux VM. Or,  try making all Require Imports/Exports fully qualified,
so that Coq doesn't import the wrong file because its name differes only in capitalization.
There is tool to help with that:
https://github.com/JasonGross/coq-tools/


If errors remain AFTER step 2, please send an email to the certicoq mailing list.
Until step 2, others may have no idea about the state of the working copy of your machine, so their help may not be applicable.

